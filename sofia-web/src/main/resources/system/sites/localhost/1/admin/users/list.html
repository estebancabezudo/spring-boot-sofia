<!DOCTYPE html>
<html>

<head>
    <title></title>
    <meta charset="UTF-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <link href="/images/favicon.png" rel="shortcut icon" type="image/png"/>
    <link lib="core:1.00"/>
    

<style>/* CSS import from /admin/commons.css called by file attribute on style tag on admin/users/list.html:10:6 */

/* CSS import from /admin/users/listUsers.html called by style tag on admin/users/listUsers.html:7:2 */

/* CSS import from /commons.css called by sofia */

/* CSS import from /footer.html called by style tag on footer.html:1:2 */

/* CSS import from /header.html called by style tag on header.html:4:2 */

/* CSS import from /burguerMenu.css called by file libraryburgerMenu:1.00 on header.html */

/* CSS import from /linkTo.css called by file librarylinkTo:1.00 on header.html */

/* CSS import from /twoLanguageFlag.css called by file librarytwoLanguageFlag:1.00 on header.html */

/* CSS code from /admin/commons.css called by file attribute on style tag on admin/users/list.html:10:6 */
#waitingImage {
    background-image: url(/images/waiting.gif);
    background-size: cover;
    width: 30px;
    height: 30px;
}

.hideWaitingImage {
    display: none;
}

#listContainer {
    display: grid;
    gap: 12px;
    grid-template-columns: auto;
    justify-content: center;
    margin: 0 auto;
}

.adminLabel {
    font-weight: bold;
}

.cell {
    width: 245px;
    background-color: white;
    padding: 20px;
    border-radius: 6px;
    aspect-ratio: 1.2;
    box-sizing: border-box;
}

.cellToAdd {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    border: 2px #D5D9D9 dashed;
}

.dataCell {
    border: 1px #D5D9D9 solid;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
}

.deleteGroupContainer {
    width: 20px;
    height: 20px;
}

.deleteGroup {
    cursor: pointer;
}

.listContainer {
    border: 1px solid rgb(207, 207, 207);
    border-radius: 5px;
    padding: 8px;
}

@media all and (min-width: 554px) {
    #content {
        grid-template-columns: auto auto;
    }
}

@media all and (min-width: 799px) {
    #content {
        width: 759px;
    }

    #listContainer {
        grid-template-columns: auto auto auto;
        justify-content: flex-start;
    }
}

@media all and (min-width: 1056px) {
    #content {
        width: 1016px;
    }

    #listContainer {
        grid-template-columns: auto auto auto auto;
    }
}

@media all and (min-width: 1301px) {
    #content {
        width: 1261px;
    }

    #listContainer {
        grid-template-columns: auto auto auto auto auto;
    }
}

/* CSS code from /admin/users/listUsers.html called by style tag on admin/users/listUsers.html:7:2 */

    .cell>div {
        font-size: 12px;
        color: gray;
    }

    .cell>div>.name {
        font-weight: bold;
        padding-bottom: 6px;
        color: rgb(65, 65, 65);
    }

    .cell>div>.locale {
        padding-bottom: 6px;
    }

    .callData {
        pointer-events: none;
    }

    .cellMenu {
        display: flex;
    }

    .menuSeparator {
        padding: 0 5px;
    }

    @media all and (min-width: 554px) {}

    @media all and (min-width: 799px) {
        #listContainer {
            grid-template-columns: auto auto auto;
            justify-content: flex-start;
        }
    }

    @media all and (min-width: 1056px) {}

    @media all and (min-width: 1301px) {}

/* CSS code from /commons.css called by sofia */
@font-face {
  font-family: Gotham;
  src: url('/fonts/gotham-light.otf');
  font-weight: 100;
  font-display: fallback;
}

@font-face {
  font-family: Gotham;
  src: url('/fonts/gotham-book.otf');
  font-weight: 300;
  font-display: fallback;
}

@font-face {
  font-family: Gotham;
  src: url('/fonts/gotham-medium.otf');
  font-weight: 600;
  font-display: fallback;
}

@font-face {
  font-family: Gotham;
  src: url('/fonts/gotham-bold.otf');
  font-weight: 800;
  font-display: fallback;
}

body,
html {
  margin: 0;
  padding: 0;
  font-family: Ubuntu;
}

h1 {
  text-align: center;
}

input,
select {
  width: 100%;
  box-sizing: border-box;
  padding: 10px 14px;
  font-size: 16px;
  font-family: Gotham;
  border: 0;
  box-sizing: border-box;
  background-color: rgba(0, 165, 8, 0.06);
}

input:disabled {
  background-color: white;
  border: 0;
}

input::placeholder,
select::placeholder {
  font-size: 16px;
  font-family: Ubuntu;
  color: rgb(211, 211, 211);
}

input:focus,
select:focus {
  outline: none;
}

input.error {
  background-color: rgba(165, 0, 0, 0.06);
  -webkit-box-shadow: 0px 0px 7px 0px #7A0000;
  box-shadow: 0px 0px 7px 0px #7A0000;
}

.button {
  width: 100%;
  font-size: 16px;
  font-family: Ubuntu;
  font-weight: bold;
  color: white;
  padding: 8px;
  text-align: center;
  box-sizing: border-box;
  border: 0;
  border-radius: 3px;
  cursor: pointer;
}

.button:disabled {
  opacity: .3;
  pointer-events: none;
}

.blueButton {
  background-color: #007BFF;
}

.greenButton {
  background-color: #195727;
}

.redButton {
  background-color: #771c1c;
}

#application {
  padding-top: var(--headerHeight);
  min-width: 280px;
}

#contentContainer {
  padding-top: var(--headerHeight);
}

#content {
  margin: 20px 40px;
}

.contentTitle {
  font-size: 32px;
  font-weight: bold;
  text-align: center;
  margin-bottom: 15px;
}

@media all and (min-width: 750px) {
  #content {
    margin: 20px auto;
    max-width: 750px;
  }

  .contentTitle {
    text-align: left;
  }
}

/* CSS code from /footer.html called by style tag on footer.html:1:2 */

    #footerMenu {
        background-color: #1b1e21;
    }

    #footerMenuContainer {
        padding: 30px 20px;
        max-width: 1140px;
        margin: auto;
    }

    #footerLogo {
        width: 80px;
        height: auto;
        aspect-ratio: 399/124;
        background-image: url(/images/logoSofia.png);
        background-size: contain;
        background-repeat: no-repeat;
    }

    #footerItems {
        display: flex;
        flex-direction: column;
        padding: 20px 0;
    }

    .footerItemsGroup {
        display: flex;
        flex-direction: column;
    }

    .footerItem {
        font-family: Gotham;
        font-weight: 300;
        color: #efefef;
        padding: 5px 0px;
        cursor: pointer;
    }

    .footerItem:hover {
        color: #aaa;
        transition-duration: .2s;
    }

    #footerInformation {
        display: flex;
        flex-direction: column;
        align-items: center;
        background-color: #282a2d;
        text-align: center;
        padding: 20px;
        font-family: Gotham;
    }

    #footerInformationContainer {
        display: flex;
        flex-direction: column;
        padding: 0 15px;
        align-items: center;
    }

    #footerInformationLinks>a {
        display: inline-block;
        padding: 0px 10px;
        font-size: 14px;
        font-weight: 300;
        color: #efefef;
        text-decoration: none;
        transition-duration: .2s;
        line-height: 1.5;
    }

    #footerInformationLinks>a:hover {
        color: #aaa;
        transition-duration: .2s;
    }

    #footerInformationNetworks {
        display: flex;
        flex-direction: row;
        justify-content: space-between;
        padding: 15px;
        width: 150px;
    }

    .footerIcon {
        width: 22px;
        height: 22px;
        background-size: cover;
    }

    .footerTwitter {
        background-image: url(/images/media/twitter.svg);
    }

    .footerInstagram {
        background-image: url(/images/media/instagram.svg);
    }

    .footerFacebook {
        background-image: url(/images/media/facebook.svg);
    }

    .footerYoutube {
        background-image: url(/images/media/youtube.svg);
    }

    .footerLinkedin {
        background-image: url(/images/media/linkedin.svg);
    }

    #footerCopyright {
        margin: 10px 0;
        font-size: 10px;
        color: #aaa;
        font-weight: 100;
    }


    @media all and (min-width: 750px) {
        #footerItems {
            flex-direction: row;
        }

        .footerItemsGroup {
            width: 40%;
        }
    }

    @media all and (min-width: 750px) {
        #footerInformationContainer {
            flex-direction: row;
        }
    }

/* CSS code from /header.html called by style tag on header.html:4:2 */

    :root {
        --headerHeight: 60px;
        --primaryColor: #116223;
    }

    #headerContainer {
        display: flex;
        position: fixed;
        box-sizing: border-box;
        width: 100%;
        height: var(--headerHeight);
        background-color: var(--primaryColor);
        justify-content: space-between;
        align-items: center;
    }

    #headerLogoContainer {
        display: flex;
        position: fixed;
        align-items: flex-end;
        width: 100%;
        justify-content: space-between;
    }

    #headerLogo {
        width: 100px;
        height: auto;
        aspect-ratio: 399/124;
        background-image: url(/images/logoSofia.png);
        background-size: contain;
        background-repeat: no-repeat;
        margin-left: 20px;
    }

    .logoBackground {
        background-color: var(--primaryColor);
        width: 100%;
        height: var(--headerHeight);
        position: fixed;
        right: 0;
        top: 0;
    }

    #headerMenuContainer {
        font-weight: bold;
        color: white;
        width: 100%;
        background-color: var(--primaryColor);
        right: 0;
    }

    .burguerMenuContainer {
        top: -59px;
        align-items: center;
        justify-content: space-between;
        transition: top .2s ease-out;
    }

    .burguerMenuContainerActive {
        display: flex;
        top: var(--headerHeight);
    }

    .menuItems {
        padding: 0 20px;
        display: flex;
        flex-direction: row;
        align-items: center;
    }

    .menuItem>span {
        cursor: pointer;
        margin: 0 10px;
    }

    .headerIcon {
        width: 28px;
        height: 28px;
        background-repeat: no-repeat;
        background-position: center;
        cursor: pointer;
    }

    .headerBurgerMenuActivator {
        background-image: url(/images/burgerMenu/1.00/burger.svg);
        margin-right: 20px;
    }

    .headerMenuClose {
        background-image: url(/images/burgerMenu/1.00/close.svg);
    }

    #headerMenuUsername,
    #headerMenuAccountName {
        font-family: Gotham;
        font-size: 10px;
        margin: 0 0 0 4px;
    }

    .messages {
        display: flex;
        color: white;
        flex-wrap: nowrap;
        padding: 5px;
        overflow: hidden;
        font-weight: bold;
        pointer-events: none;
        transition: background-color .2s ease-out;
    }

    .errorMessage {
        background-color: rgb(177, 40, 40);
    }

    .message {
        background-color: rgb(82, 89, 190);
    }

    @media all and (min-width: 750px) {

        .burguerMenuContainer {
            position: relative;
            display: flex;
            top: 0;
            justify-content: flex-end;
            transition: none;
        }

        .logoBackground {
            display: none;
        }

        #headerBurgerMenuActivator {
            display: none;
        }

        #headerLogoContainer {
            width: auto;
        }
    }

/* CSS code from /burguerMenu.css called by file libraryburgerMenu:1.00 on header.html */
.burgerMenuHiddenMenuItem {
    display: none;
}

/* CSS code from /linkTo.css called by file librarylinkTo:1.00 on header.html */
.linkTo {}

.hide {
    display: none;
}

.visible {
    display: block;
}

.disabled {
    cursor: auto;
    pointer-events: none;
}

.enabled {
    cursor: pointer;
}

/* CSS code from /twoLanguageFlag.css called by file librarytwoLanguageFlag:1.00 on header.html */
.twoLanguageFlagContainer {
    margin: 0 0 0 10px;
    cursor: pointer;
}

.twoLanguageFlagFlag {
    width: 16px;
    height: 11px;
    display: none;
}

.twoLanguageFlagVisible {
    display: block;
}

.twoLanguageFlagContainer>.en {
    background-image: url(/images/flags/en.png);
}

.twoLanguageFlagContainer>.es {
    background-image: url(/images/flags/es.png);
}

</style>
<script>const siteLanguages = ['en', 'es'];

const templateVariables = { "header": { "height": "60px" } };
'use strict';
class User {
    constructor(data) {
        this.username = data.username;
        if (Core.isArray(data.groups)) {
            this.groups = data.groups;
        } else {
            this.groups = [];
        }
    };
}
const Core = {
    PLACEHOLDER: 1,
    VALUE: 2,
    texts: {},
    actualLanguage: null,
    user: null,
    requestId: 0,
    topics: [],
    reportSystemErrorFunction: null,
    queryParameters: new URLSearchParams(location.search),
    getActualWebClientDetails: () => {
        fetch('/v1/web/clients/actual/details', {
            method: 'GET'
        })
            .then(response => response.json())
            .then(jsonData => {
                const user = jsonData.user;
                if (user === undefined || user === null) {
                    Core.user = null;
                } else {
                    Core.user = new User(user);
                }
                Core.publish('core:webClientDataChange', jsonData);
            });
    },
    getPreferredLanguage: () => {
        const defaultFromSiteLanguages = () => {
            if (siteLanguages.includes("en") || siteLanguages.length == 0) {
                return 'en';
            }
            return siteLanguages[0];
        };
        const browserLocale = window.navigator.userLanguage || window.navigator.language;
        if (siteLanguages.includes(browserLocale)) {
            return browserLocale;
        }
        if (siteLanguages.includes(browserLocale.substring(0, 2))) {
            return browserLocale;
        }
        if (browserLocale.length < 2) {
            return defaultFromSiteLanguages();
        }
        const browserLanguage = browserLocale.substring(1, 2).toLowerCase();
        if (siteLanguages.includes(browserLanguage)) {
            return browserLanguage;
        }
        return defaultFromSiteLanguages();
    },
    getGeoLocation: async () => {
        if (navigator.geolocation) {
            try {
                const getCurrentPositionPromiseFunction = (resolve, reject) => {
                    navigator.geolocation.getCurrentPosition(resolve, reject);
                };
                const locationData = await new Promise(getCurrentPositionPromiseFunction);
                return {
                    status: "OK",
                    message: "OK",
                    code: 0,
                    data: locationData
                };
            } catch (error) {
                return {
                    status: "ERROR",
                    message: error.message,
                    code: error.code,
                    data: null
                };
            }
        } else {
            return {
                status: "NOT_SUPPORTED",
                message: "Geolocation is not supported by this browser.",
                code: 0,
                data: null
            }
                ;
        }
    },
    getCookie: name => {
        const stringToFind = `${name}=`;
        const uriDecoded = decodeURIComponent(document.cookie);
        const cookieArray = uriDecoded.split(';');
        cookieArray.forEach(cookie => {
            while (cookie.charAt(0) == ' ') {
                cookie = cookie.substring(1);
            }
            if (cookie.indexOf(stringToFind) === 0) {
                return cookie.substring(stringToFind.length);
            }
        })
    },
    getNextRequestId: () => {
        return Core.requestId++;
    },
    getText: (key, values) => {
        if (!key) {
            console.trace();
            throw new Error(`Missing parameter key: ${key}`);
        }
        let text = texts[key];
        if (!text) {
            text = `[${key}]`;
        }
        if (values) {
            if (Core.isArray(values)) {
                let i = 0;
                values.forEach(value => {
                    const RegExpText = "\\{" + i + "\\}";
                    const searchRegExp = new RegExp(RegExpText, 'g');
                    text = text.replace(searchRegExp, value);
                    i++;
                });
            } else {
                throw new Error('The second parameter MUST be an array');
            }
        }
        return text;
    },
    getTimezoneOffset: () => {
        return (new Date()).getTimezoneOffset();
    },
    isArray: v => {
        return Object.prototype.toString.call(v) === '[object Array]';
    },
    isFunction: v => {
        return Object.prototype.toString.call(v) === '[object Function]';
    },
    isLogged: () => {
        const user = Core.user;
        if (user === undefined || user === null) {
            return false;
        }
        const username = user.username;
        return username !== undefined && username !== null;
    },
    isNotLogged: () => {
        return !Core.isLogged();
    },
    isString: v => {
        return Object.prototype.toString.call(v) === '[object String]';
    },
    isHTMLDivElement: v => {
        try {
            return v instanceof HTMLElement;
        } catch (e) {
            return Object.prototype.toString.call(v) === '[object HTMLDivElement]';
        }
    },
    isValid: list => {
        if (!list || list === null) {
            return false;
        }
        for (let i = 0; i < list.length; i++) {
            const value = list[i];
            if (value === 'status:logged' && Core.isLogged()) {
                return true;
            }
            if (value === 'status:notLogged' && Core.isNotLogged()) {
                return true;
            }
            if (value.startsWith("page:")) {
                const page = value.substr(5);
                if (page.endsWith('**')) {
                    if (window.location.pathname.startsWith(page.substring(0, page.length - 2))) {
                        return true;
                    }
                } else {
                    if (window.location.pathname === page) {
                        return true;
                    }
                }
            }
            if (value.startsWith("group:")) {
                const group = value.substr(6);
                if (Core.user === null) {
                    return false;
                }
                const groups = Core.user.groups;
                for (g of groups) {
                    if (group === g.name) {
                        return true;
                    }
                };
                return false;
            }
            if (value === 'default') {
                return true;
            }
        };
        return false;
    },
    loadLanguage: languageCode => {
        let fetchLanguage;
        if (siteLanguages.includes(languageCode)) {
            fetchLanguage = languageCode;
        }
        if (siteLanguages.includes(languageCode.substring(0, 2))) {
            fetchLanguage = languageCode.substring(0, 2);
        }
        const page = window.location.pathname;
        if (fetchLanguage) {
            fetch(`/v1/pages/actual/texts?language=${fetchLanguage}&page=${page}`, {
                headers: {
                    "Content-Type": "application/json"
                }
            })
                .then(response => response.json())
                .then(jsonData => {
                    texts = JSON.parse(jsonData.data);
                    Core.actualLanguage = fetchLanguage;
                    Core.setTexts(texts);
                })
                ;
        } else {
            throw Error(`Invalid language: ${languageCode}`);
        }
    },
    publish: (topicsName, data) => {
        const functions = Core.topics[topicsName];
        if (functions && Core.isArray(functions)) {
            functions.forEach(func => {
                func(data);
            });
        }
    },
    reportSystemError: error => {
        if (Core.isFunction(Core.reportSystemErrorFunction)) {
            Core.reportSystemErrorFunction(error);
        }
    },
    setReportSystemErrorFunction: reportSystemErrorFunction => {
        Core.reportSystemErrorFunction = reportSystemErrorFunction;
    },
    // This function avoid the race condition if the asignation of the text 
    // to the element is before the text web service is called
    setText: (element, key, options) => {
        Core.subscribeTo('core:setTexts', () => {
            Core.setTextToElement(element, Core.texts[key], options);
        });
        if (Core.texts[key]) {
            Core.setTextToElement(element, Core.texts[key], options);
        };
    },
    setTexts: ts => {
        texts = Object.assign(Core.texts, ts);
        Core.setTextsById();
        Core.publish('core:setTexts', { language: Core.actualLanguage });
    },
    showErrorMessage: errorMessage => {
        let jsonMessage;
        if (Core.isString(errorMessage)) {
            jsonMessage = { errorMessage };
        } else {
            jsonMessage = errorMessage;
        }
        Core.publish('core:showErrorMessage', jsonMessage);
    },
    showMessage: message => {
        let jsonMessage;
        if (Core.isString(message)) {
            jsonMessage = { message };
        } else {
            jsonMessage = errorMessage;
        }
        Core.publish('core:showMessage', jsonMessage);
    },
    setTextsById: () => {
        for (const [key, value] of Object.entries(Core.texts)) {
            const element = document.getElementById(key);
            Core.setTextToElement(element, value);
        }
    },
    setTextToElement: (element, text, options) => {
        if (Core.isHTMLDivElement(element)) {
            do {
                if (
                    element instanceof HTMLSpanElement || element instanceof HTMLDivElement || element instanceof HTMLButtonElement || element instanceof HTMLOptionElement || element instanceof HTMLAnchorElement ||
                    element instanceof HTMLTitleElement || element instanceof HTMLParagraphElement || element instanceof HTMLHeadingElement) {
                    const childNodes = element.childNodes;
                    const write = childNodes.length === 0 || (childNodes.length === 1 && childNodes[0].nodeType === Node.TEXT_NODE && element.textContent !== text);
                    if (write) {
                        element.innerHTML = text;
                    } else {
                    }
                    break;
                }
                if (element instanceof HTMLInputElement) {
                    switch (element.type) {
                        case 'submit':
                            element.value = text;
                            break;
                        case 'text':
                            if (options === undefined || options === null || options & Core.PLACEHOLDER === Core.PLACEHOLDER) {
                                element.placeholder = text;
                            }
                            if ((options & Core.VALUE) === Core.VALUE) {
                                element.value = text;
                            }
                            break;
                        case 'password':
                            element.placeholder = text;
                            break;
                        default:
                    }
                    break;
                }
                if (element instanceof HTMLSelectElement) {
                    break;
                }
                throw Error(`Set text to unknown element with id ${element.id} (${element.constructor.name})`);
            } while (false);
        }
    },
    subscribeTo: (topicsName, functionToExecute) => {
        let functions = Core.topics[topicsName];
        if (!functions) {
            functions = [];
            Core.topics[topicsName] = functions;
        }
        functions.push(functionToExecute);
    }
}
const pageLoaded = async () => {
    Core.getActualWebClientDetails();
    Core.subscribeTo('core:setTexts', data => {
        const message = Core.queryParameters.get('message');
        if (message) {
            Core.showMessage(message);
        }
    });
    Core.subscribeTo('core:webClientDataChange', data => {
        if (data.language === undefined || data.language === null) {
            Core.loadLanguage(Core.getPreferredLanguage());
        } else {
            Core.loadLanguage(data.language);
        }
    })
}
window.addEventListener('load', pageLoaded, false);
class BurgerMenu {
    constructor(configuration) {
        this.beforeShow = configuration.beforeShow;
        this.beforeHide = configuration.beforeHide;
        const validateElements = (menuContainerId, openMenuButtonId, closeMenuButtonId) => {
            this.menuContainer = document.getElementById(menuContainerId);
            if (!this.menuContainer) {
                throw new Error(`Can't find the element with the id ${menuContainerId}`);
            }
            this.openMenuButton = document.getElementById(openMenuButtonId);
            if (!this.openMenuButton) {
                throw new Error(`Can't find the element with the id ${openMenuButtonId}`);
            }
            this.closeMenuButton = document.getElementById(closeMenuButtonId);
            if (!this.closeMenuButton) {
                throw new Error(`Can't find the element with the id ${closeMenuButtonId}`);
            }
        }
        const createGUI = (items) => {
            this.subMenus = new Array();
            this.menuVisible = false;
            this.openMenuButton.addEventListener('click', event => {
                if (this.menuVisible) {
                    this.hide();
                    event.stopPropagation();
                } else {
                    this.show();
                    event.stopPropagation();
                }
            });
            if (openMenuButtonId != closeMenuButtonId) {
                this.closeMenuButton.addEventListener('click', event => {
                    this.hide();
                    event.stopPropagation();
                });
            }
            document.addEventListener('click', event => {
                this.hide();
                event.stopPropagation();
            });
            const showItem = item => {
                const element = document.getElementById(item.id);
                element.addEventListener('click', event => {
                    if (Core.isString(item.onclick)) {
                        location.href = item.onclick;
                    }
                })
                element.classList.remove('burgerMenuHiddenMenuItem');
            }
            const hideItem = item => {
                const element = document.getElementById(item.id);
                element.classList.add('burgerMenuHiddenMenuItem');
            }
            items.forEach(item => {
                if (item.hide || item.show) {
                    hideItem(item);
                }
            });
            Core.subscribeTo('core:webClientDataChange', () => {
                items.forEach(item => {
                    if (item.hide && Core.isValid(item.hide)) {
                        hideItem(item);
                        return;
                    }
                    if (item.show && Core.isValid(item.show)) {
                        showItem(item);
                        return;
                    }
                    showItem(item);
                });
            });
        };
        const menuContainerId = configuration.menuContainerId;
        const openMenuButtonId = configuration.openMenuElementId;
        const closeMenuButtonId = configuration.closeMenuElementId;
        const items = configuration.items;
        validateElements(menuContainerId, openMenuButtonId, closeMenuButtonId);
        createGUI(items);
    };
    show() {
        if (Core.isFunction(this.beforeShow)) {
            this.beforeShow();
        }
        if (!this.menuVisible) {
            this.menuVisible = true;
            this.menuContainer.classList.add('burguerMenuContainerActive');
        }
    };
    hide() {
        if (Core.isFunction(this.beforeHide)) {
            this.beforeHide();
        }
        if (this.menuVisible) {
            this.menuVisible = false;
            this.menuContainer.classList.remove('burguerMenuContainerActive');
        }
    };
}
/**
 * Configuration
 * id - The element to link to.
 * onclick - A string with the url to link or a function to execute when the link is clicked
 * disabled - true if the link is disabled
 * enable - enable when is login, or not login or in a certain page
 * disable - disable when is login, or not login, or in a certain page
 * show - show when is login, or not login, or in a certain page
 * hide - hide when is login, or not login or in a certain page
 * 
 *  */
class LinkTo {
    constructor(configuration) {
        const getElement = (id, element) => {
            if (id === undefined && element === undefined) {
                throw new Error('You MUST specify an id or element to apply the link to.');
            }
            if (Core.isString(id)) {
                const element = document.getElementById(id);
                if (element === null || element === undefined) {
                    throw new Error(`Element NOT FOUND: ${id}`);
                }
                return element;
            }
            if (Core.isHTMLDivElement(element)) {
                return element;
            }
        };
        this.element = getElement(configuration.id, configuration.element);
        this.element.classList.add('linkTo');
        const click = (event, newWindow) => {
            if (this.enable && Core.isString(configuration.onclick)) {
                if (newWindow === true) {
                    window.open(configuration.onclick, '_blank');
                } else {
                    location.href = configuration.onclick;
                }
                return;
            }
            if (Core.isFunction(configuration.onclick)) {
                configuration.onclick(event);
                return;
            }
        };
        this.element.addEventListener('click', click);
        this.element.addEventListener('mouseup', event => {
            if (event.button === 1) {
                click(event, true);
            }
        });
        if (configuration.disabled) {
            configuration.disabled ? this.disable() : this.enable();
        } else {
            this.enable();
        }
        Core.subscribeTo('core:webClientDataChange', () => {
            do {
                if (configuration.show && Core.isValid(configuration.show)) {
                    this.show();
                    break;
                }
                if (configuration.hide && Core.isValid(configuration.hide)) {
                    this.hide();
                    break;
                }
            } while (false);
            do {
                if (configuration.enable && Core.isValid(configuration.enable)) {
                    this.enable();
                    break;
                }
                if (configuration.disable && Core.isValid(configuration.disable)) {
                    this.disable();
                    break;
                }
            } while (false);
            if (configuration.mark && Core.isValid(configuration.mark)) {
                this.mark();
                return;
            }
        });
    }
    mark() {
        this.element.classList.add('marked')
    }
    show() {
        this.element.classList.add('visible')
        this.element.classList.remove('hide')
    }
    hide() {
        this.element.classList.add('hide')
        this.element.classList.remove('visible')
    }
    disable() {
        this.isDisable = true;
        this.element.classList.add('disabled')
        this.element.classList.remove('enabled')
    }
    enable() {
        this.isDisable = false;
        this.element.classList.add('enabled')
        this.element.classList.remove('disabled')
    }
}
/*
 * Created on: 11/05/2021
 * Author:     Esteban Cabezudo
 */
class TwoLanguageFlag {
    constructor(configuration) {
        this.languages = configuration.languages;
        this.onchange = configuration.onchange;
        const validateOptions = () => {
            this.container = document.getElementById(configuration.id);
            if (!this.container) {
                throw new Error(`Can't find the element with the id ${configuration.id}`);
            }
        }
        const setFlagToShow = () => {
            if (Core.actualLanguage === this.languages[0].code) {
                this.languages[1].element.classList.add('twoLanguageFlagVisible');
                this.languages[0].element.classList.remove('twoLanguageFlagVisible');
            } else {
                this.languages[0].element.classList.add('twoLanguageFlagVisible');
                this.languages[1].element.classList.remove('twoLanguageFlagVisible');
            }
        };
        const createGUI = () => {
            this.container.className = 'twoLanguageFlagContainer';
            const setLanguageFlag = (languageToSet) => {
                languageToSet.element.className = 'twoLanguageFlagFlag';
                languageToSet.element.classList.add(languageToSet.code);
                languageToSet.element.addEventListener('click', event => {
                    Core.loadLanguage(languageToSet.code);
                    if (Core.isFunction(this.onchange)) {
                        this.onchange(languageToSet.code);
                    }
                    event.stopPropagation();
                });
                this.container.appendChild(languageToSet.element);
            }
            this.languages[0].element = document.createElement('DIV');
            this.languages[1].element = document.createElement('DIV');
            setLanguageFlag(this.languages[0]);
            setLanguageFlag(this.languages[1]);
            Core.subscribeTo('core:setTexts', setFlagToShow);
        };
        validateOptions();
        createGUI();
    };
    getActualLanguage = () => {
        return Core.actualLanguage;
    };
}
    const initHeader = () => {
        const burgerMenu = new BurgerMenu(
            {
                menuContainerId: 'headerMenuContainer',
                openMenuElementId: 'headerBurgerMenuActivator',
                closeMenuElementId: 'headerBurgerMenuActivator',
                items: [
                    {
                        id: 'headerMenuUsername',
                        hide: ['status:notLogged'],
                        show: ['status:logged'],
                    },
                    {
                        id: 'headerMenuItemUsers',
                        hide: ['page:/admin/users/list.html'],
                        onclick: '/admin/users/list.html'
                    },
                    {
                        id: 'headerMenuItemPlaces',
                        hide: ['page:/admin/places/list.html'],
                        onclick: '/admin/places/list.html'
                    },
                    {
                        id: 'headerMenuItemLogin',
                        hide: ['status:logged', 'page:/login.html'],
                        show: ['status:notLogged'],
                        onclick: '/login.html'
                    },
                    {
                        id: 'headerMenuItemLogout',
                        hide: ['status:notLogged'],
                        show: ['status:logged'],
                        onclick: '/logout'
                    }
                ]
            }
        );
        const headerMenuAccountNameElement = document.getElementById('headerMenuAccountName');
        new LinkTo({
            element: headerMenuAccountNameElement,
            onclick: '/users/accounts.html',
            show: ['page:/'],
        });
        new LinkTo({
            id: 'headerLogo',
            onclick: '/',
            disableWhen: ['page:/'],
        });
        new TwoLanguageFlag({
            id: 'twoLanguageFlag',
            languages: [{ code: 'en' }, { code: 'es' }]
        });
        Core.subscribeTo('core:showErrorMessage', data => {
            const hideMessage = () => {
                element.classList.remove('errorMessage');
            };
            const element = document.getElementById('messages');
            element.innerHTML = Core.getText(data.errorMessage);
            element.classList.add('errorMessage');
            setTimeout(hideMessage, 3000);
        });
        Core.subscribeTo('core:showMessage', data => {
            const hideMessage = () => {
                element.classList.remove('message');
            };
            const element = document.getElementById('messages');
            element.innerHTML = Core.getText(data.message);
            element.classList.add('message');
            setTimeout(hideMessage, 8000);
        });
        Core.subscribeTo('core:webClientDataChange', data => {
            if (data !== null && data.user !== null) {
                username = data.user.username;
                accountName = data.account.name;
                document.getElementById('headerMenuUsername').innerHTML = `${username}`;
                headerMenuAccountNameElement.innerHTML = ` (${accountName})`;
            }
        });
    }
    window.addEventListener('load', initHeader);
const LIST_USERS_URL = '/admin/users/list.html';
class UserList {
    constructor() {
    }
    loadUserList() {
        const loadList = () => {
            fetch('/v1/users')
                .then(response => {
                    if (response.status === 200) {
                        return response.json();
                    }
                    throw new Error(response.statusText);
                })
                .then(jsonResponse => {
                    createList(jsonResponse.data);
                })
                .catch(error => {
                    Core.showErrorMessage(error);
                });
        };
        const createList = data => {
            const elementsToDelete = document.getElementsByClassName('dataCell');
            while (elementsToDelete.length > 0) {
                elementsToDelete[0].parentNode.removeChild(elementsToDelete[0]);
            }
            data.list.forEach(element => {
                const userElement = document.createElement('DIV');
                userElement.className = 'cell dataCell';
                const username = `<div class="name">${element.username}</div>`;
                const locale = `<div class="locale">${element.locale}</div>`;
                let groupsInnerHTML = '';
                element.groups.forEach(element => {
                    groupsInnerHTML += `<div>${element.name}</div>`;
                });
                const groups = `<div>${groupsInnerHTML}</div>`;
                const cellMenuDataElement = document.createElement('DIV');
                cellMenuDataElement.className = 'callData';
                cellMenuDataElement.innerHTML = `${username}${locale}${groups}`;
                userElement.appendChild(cellMenuDataElement);
                const cellMenuElement = document.createElement('DIV');
                cellMenuElement.className = 'cellMenu';
                userElement.appendChild(cellMenuElement);
                const cellMenuItemEditElement = document.createElement('DIV');
                Core.setText(cellMenuItemEditElement, 'edit');
                new LinkTo({
                    element: cellMenuItemEditElement,
                    onclick: `/admin/users/user.html?id=${element.id}`
                });
                cellMenuElement.appendChild(cellMenuItemEditElement);
                const firstSeparatorNode = document.createElement('DIV');
                firstSeparatorNode.innerHTML = '&#124;';
                firstSeparatorNode.className = 'menuSeparator';
                cellMenuElement.appendChild(firstSeparatorNode);
                const cellMenuItemDeleteElement = document.createElement('DIV');
                Core.setText(cellMenuItemDeleteElement, 'delete');
                new LinkTo({
                    element: cellMenuItemDeleteElement,
                    onclick: () => {
                        fetch(`/v1/users/${element.id}`, { method: 'DELETE' })
                            .then(response => {
                                if (response.status === 200) {
                                    loadList();
                                    if (Core.isFunction(this.afterDeleteFunction)) {
                                        this.afterDeleteFunction();
                                    }
                                } else {
                                    Core.showErrorMessage(Core.getText('responseErrorWhenDeleting', [response.status]));
                                }
                            })
                            .catch(error => {
                                Core.showErrorMessage(error);
                            });
                    }
                });
                cellMenuElement.appendChild(cellMenuItemDeleteElement);
                const secondSeparatorNode = document.createElement('DIV');
                secondSeparatorNode.innerHTML = '&#124;';
                secondSeparatorNode.className = 'menuSeparator';
                cellMenuElement.appendChild(secondSeparatorNode);
                const cellMenuItemPasswordElement = document.createElement('DIV');
                Core.setText(cellMenuItemPasswordElement, 'password');
                new LinkTo({
                    element: cellMenuItemPasswordElement,
                    onclick: `/admin/users/password.html?id=${element.id}`
                });
                cellMenuElement.appendChild(cellMenuItemPasswordElement);
                listContainer.appendChild(userElement);
            });
        }
        const listContainer = document.getElementById('listContainer');
        listContainer.innerText = '';
        const addUserElement = document.createElement('DIV');
        addUserElement.className = 'cell cellToAdd';
        listContainer.appendChild(addUserElement);
        addUserElement.innerHTML =
            '<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" fill="gray" class="bi bi-plus" viewBox="0 0 16 16"> <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"/></svg><div id="textForAddUser"></div>';
        new LinkTo({
            element: addUserElement,
            onclick: `/admin/users/addUser.html`
        });
        loadList();
    };
    afterDelete(afterDeleteFunction) {
        this.afterDeleteFunction = afterDeleteFunction;
    }
}
    const list = new UserList();
    window.addEventListener('load', list.loadUserList, false);
    const initFooter = () => {
        new LinkTo({
            id: 'footerItemLogin',
            onclick: '/login.html',
            hideWhen: ['status:logged', 'page:/login.html']
        });
    }
    window.addEventListener('load', initFooter);
Core.setReportSystemErrorFunction(error => {
    Core.showErrorMessage(error.message);
    throw error;
});
</script>
</head>

<body>
    <header>
    <div id="headerContainer">
        <div class="burguerMenuContainer" id="headerMenuContainer">
            <div class="menuItems">
                <div class="menuItem" id="headerMenuUsername"></div>
                <div class="menuItem" id="headerMenuAccountName"></div>
                <div class="menuItem" id="headerMenuItemUsers">
                    <span id="s1"></span>
                </div>
                <div class="menuItem" id="headerMenuItemPlaces">
                    <span id="s2"></span>
                </div>
                <div class="menuItem" id="headerMenuItemLogin">
                    <span id="s3"></span>
                </div>
                <div class="menuItem" id="headerMenuItemLogout">
                    <span id="s4"></span>
                </div>
                <div class="menuItem" id="twoLanguageFlag"></div>
            </div>
        </div>
        <div class="logoBackground"></div>
        <div id="headerLogoContainer">
            <div id="headerLogo"></div>
            <div class="headerIcon headerBurgerMenuActivator" id="headerBurgerMenuActivator"></div>
        </div>
    </div>
</header>
    <div id="contentContainer">
        <div class="messages" id="messages">&nbsp;</div>
        <div id="content">
    <div class="contentTitle">
        <span id="s5"></span>
    </div>
    <div id="listContainer"></div>
</div>
    </div>
    <footer>
    <div id="footerMenu">
        <div id="footerMenuContainer">

            <div id="footerLogo"></div>
            <div id="footerItems">
                <div class="footerItemsGroup">
                    <div class="footerItem">
                        <span id="s6"></span>
                    </div>
                    <div class="footerItem">
                        <span id="s7"></span>
                    </div>
                </div>
                <div class="footerItemsGroup">
                    <div class="footerItem">
                        <span id="s8"></span>
                    </div>
                    <div class="footerItem" id="footerItemLogin">
                        <span id="s9"></span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="footerInformation">
        <div id="footerInformationContainer">
            <div id="footerInformationLinks">
                <a href="">
                    <span id="s10"></span>
                </a>
                <a href="">
                    <span id="s11"></span>
                </a>
            </div>
            <div id="footerInformationNetworks">
                <div class="footerIcon footerTwitter" href="https://twitter.com/" target="_blank"></div>
                <a class="footerIcon footerInstagram" href="https://www.instagram.com/" target="_blank"></a>
                <div class="footerIcon footerFacebook" href="https://www.facebook.com/" target="_blank"></div>
                <a class="footerIcon footerYoutube" href="https://www.youtube.com/" target="_blank"></a>
                <a class="footerIcon footerLinkedin" href="https://www.linkedin.com/" target="_blank"></a>
            </div>
        </div>
        <div id="footerCopyright">
            <span id="s12"></span>
        </div>
    </div>
</footer>
</body>

</html>
